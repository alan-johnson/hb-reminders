{"version":3,"sources":["webpack/bootstrap 3478b32a7543e528a0e7","/Users/alanjohnson/Library/Application Support/Pebble SDK/SDKs/4.9.77/sdk-core/pebble/common/include/_pkjs_shared_additions.js","./src/pkjs/index.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA,EAAC;;;;;;;ACnCD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAAyB,cAAc;AACvC;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA","file":"pebble-js-app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3478b32a7543e528a0e7","/**\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n(function(p) {\n  if (!p === undefined) {\n    console.error('Pebble object not found!?');\n    return;\n  }\n\n  // Aliases:\n  p.on = p.addEventListener;\n  p.off = p.removeEventListener;\n\n  // For Android (WebView-based) pkjs, print stacktrace for uncaught errors:\n  if (typeof window !== 'undefined' && window.addEventListener) {\n    window.addEventListener('error', function(event) {\n      if (event.error && event.error.stack) {\n        console.error('' + event.error + '\\n' + event.error.stack);\n      }\n    });\n  }\n\n})(Pebble);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/alanjohnson/Library/Application Support/Pebble SDK/SDKs/4.9.77/sdk-core/pebble/common/include/_pkjs_shared_additions.js\n// module id = 1\n// module chunks = 0","// PebbleKit JS - Handles communication between watch and REST API\nconsole.log('*** JavaScript file loaded! ***');\n\nvar hostname = \"localhost\";\nvar port = 8080;\nvar API_BASE = \"http://\" + hostname + \":\" + port + \"/tasks\";\n\n// Listen for when the app is ready\nPebble.addEventListener('ready', function(e) {\n  console.warn('=== PEBBLE READY ===');\n  console.log('PebbleKit JS ready!');\n  // Don't fetch here, let the watch app request when needed\n  \n  // Send ready signal to watch (KEY_TYPE = 0)\n  Pebble.sendAppMessage({'KEY_TYPE': 0}, \n    function(e) {\n      console.log('Ready message sent to watch successfully!');\n    },\n    function(e) {\n      console.log('Failed to send ready message to watch');\n    }\n  );\n});\n\n// Listen for messages from the watch\nPebble.addEventListener('appmessage', function(e) {\n  console.warn('=== APPMESSAGE EVENT FIRED ===');\n  console.log('AppMessage received!');\n  console.log('Payload:', JSON.stringify(e.payload));\n  var payload = e.payload;\n\n  // Acknowledge receipt of the message\n  //e.ack();\n\n  if (payload[KEY_TYPE] !== undefined) {\n    if (payload.KEY_TYPE === 1) {\n      // Fetch task lists\n      console.log('KEY_TYPE 1: Fetching task lists');\n      fetchTaskLists();\n    } else if (payload.KEY_TYPE === 2) {\n      // Fetch tasks for a specific list\n      var listName = payload.KEY_LIST_NAME;\n      console.log('KEY_TYPE 2: Fetching tasks for list:', listName);\n      fetchTasks(listName);\n    } else if (payload.KEY_TYPE === 3) {\n      // Complete a task\n      var taskId = payload.KEY_ID;\n      var listName = payload.KEY_LIST_NAME;\n      console.log('KEY_TYPE 3: Completing task', taskId, 'in list', listName);\n      completeTask(taskId, listName);\n    }\n  }\n});\n\n// Fetch task list names\nfunction fetchTaskLists() {\n  console.log('Fetching task lists from API...');\n\n  var xhr = new XMLHttpRequest();\n  xhr.open('GET', API_BASE, true);\n  xhr.onload = function() {\n    if (xhr.readyState === 4) {\n      if (xhr.status === 200) {\n        try {\n          var response = JSON.parse(xhr.responseText);\n          console.log('Received lists:', JSON.stringify(response));\n          sendTaskListsToWatch(response.lists);\n        } catch (e) {\n          console.log('Error parsing response:', e);\n        }\n      } else {\n        console.log('Failed to fetch task lists. Status:', xhr.status);\n      }\n    }\n  };\n  xhr.send();\n}\n\n// Send task lists to the watch\nfunction sendTaskListsToWatch(lists) {\n  // Send lists one at a time due to message size limitations\n  for (var i = 0; i < lists.length; i++) {\n    var dict = {\n      'KEY_TYPE': 1,\n      'KEY_NAME': lists[i].name || lists[i]\n    };\n    \n    Pebble.sendAppMessage(dict,\n      function(e) {\n        console.log('Task list sent to Pebble successfully!');\n      },\n      function(e) {\n        console.log('Error sending task list to Pebble!');\n      }\n    );\n  }\n}\n\n// Fetch tasks for a specific list\nfunction fetchTasks(listName) {\n  console.log('Fetching tasks for list from API: ' + listName);\n\n  var xhr = new XMLHttpRequest();\n  xhr.open('GET', API_BASE + '/' + encodeURIComponent(listName), true);\n  xhr.onload = function() {\n    if (xhr.readyState === 4) {\n      if (xhr.status === 200) {\n        try {\n          var response = JSON.parse(xhr.responseText);\n          console.log('Received tasks:', JSON.stringify(response));\n          sendTasksToWatch(response.tasks);\n        } catch (e) {\n          console.log('Error parsing response:', e);\n        }\n      } else {\n        console.log('Failed to fetch tasks. Status:', xhr.status);\n      }\n    }\n  };\n  xhr.send();\n}\n\n// Send tasks to the watch\nfunction sendTasksToWatch(tasks) {\n  // Send tasks one at a time\n  for (var i = 0; i < tasks.length; i++) {\n    var task = tasks[i];\n    var dict = {\n      'KEY_TYPE': 2,\n      'KEY_ID': task.id || '',\n      'KEY_IDX': i,\n      'KEY_NAME': task.name || task.title || '',\n      'KEY_PRIORITY': task.priority || 0,\n      'KEY_DUE_DATE': task.dueDate || task.due_date || 'No due date',\n      'KEY_COMPLETED': task.completed ? 1 : 0\n    };\n    \n    Pebble.sendAppMessage(dict,\n      function(e) {\n        console.log('Task sent to Pebble successfully!');\n      },\n      function(e) {\n        console.log('Error sending task to Pebble!');\n      }\n    );\n  }\n}\n\n// Complete a task\nfunction completeTask(taskId, listName) {\n  console.log('Completing task: ' + taskId + ' in list: ' + listName);\n  \n  var xhr = new XMLHttpRequest();\n  xhr.open('POST', API_BASE + '/complete', true);\n  xhr.setRequestHeader('Content-Type', 'application/json');\n  xhr.onload = function() {\n    if (xhr.readyState === 4) {\n      if (xhr.status === 200 || xhr.status === 204) {\n        console.log('Task completed successfully');\n        // Optionally send confirmation back to watch\n        var dict = {\n          'KEY_TYPE': 4,\n          'KEY_ID': taskId\n        };\n        Pebble.sendAppMessage(dict);\n      } else {\n        console.log('Failed to complete task. Status: ' + xhr.status);\n      }\n    }\n  };\n  \n  var data = JSON.stringify({\n    taskId: taskId,\n    listName: listName\n  });\n  \n  xhr.send(data);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pkjs/index.js\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}