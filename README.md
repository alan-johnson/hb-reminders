# Claude Reminders

A card-based task management application for Pebble smartwatches that integrates with a REST API.

This only connects to Apple Reminders on a Mac.

## Features

- **Three-level navigation**: Task Lists → Tasks → Task Details
- **Card-based UI**: Natural navigation through different views
- **Task completion**: Mark tasks as complete directly from the watch
- **REST API integration**: Fetches and updates data from Apple Reminders application

## Project Structure

```
task_manager.c     - Main C application (watch-side code)
index.js           - PebbleKit JavaScript (phone-side API communication)
package.json       - Pebble app configuration

server.py          - Python script to receive API calls from the index.js script then calls the locally installed reminder-cli application returning the results as JSON
```

## API Endpoints

The app expects the following REST API endpoints:

1. **GET** `http://hostip:5050/tasks/lists`
   - Returns an array of task list names
   - Example response: `["Personal", "Work", "Shopping"]`

2. **GET** `http://hostip:5050/tasks/lists/<list_name>`
   - Returns tasks for a specific list
   - Example response:
   ```json
   [
     {
       "externalId": "65A7AD7B-F211-4E3D-A892-E47CE8B038B5" // UUID generated by Reminders
       "id": 3,   //id number of the task within the list
       "title": "Buy groceries", // name of the task
       "dueDate": "2024-10-18T05:00:00Z",  // due date in UTC format (optional field)
       "isCompleted": false/true // boolean if the task is completed or not
     }
   ]
   ```

3. **POST** `http://hostip:5050/tasks/complete`
   - Marks a task as complete
   - Request body:
   ```json
   {
     "id": 0, //id number of the task returned by reminders_cli. note: this is not the externalId
     "listName": "Personal" //list name must match the list name in Reminders
   }
   ```

For the above, the ```hostip``` value must be the ip address of the computer running the python ```server.py``` script.

## Setup Instructions

### Prerequisites
- Pebble SDK installed
- CloudPebble account (alternative to locally installed Pebble SDK)
- Your REST API running on `hostip_address:5050`
- The `reminders-cli` command line interface (cli) application.

#### Getting the reminders cli application
##### With Homebrew

`$ brew install keith/formulae/reminders-cli`

##### From GitHub releases

Download the latest release from [here](https://github.com/keith/reminders-cli/releases)

```
$ tar -zxvf reminders.tar.gz
$ mv reminders /usr/local/bin
$ rm reminders.tar.gz
```

Building manually

*This requires a recent Xcode installation.*

$ cd reminders-cli
$ make build-release
$ cp .build/apple/Products/Release/reminders /usr/local/bin/reminders

### Building the Watch App

1. Fork the Pebble Reminders project from GitHub, https://github.com/alan-johnson/claude-reminders

1. **Using Pebble SDK locally:**
   ```bash
   # Create a new Pebble project
   pebble new-project task-manager
   cd task-manager
   
   # 
   cp task_manager.c src/task_manager.c
   cp index.js src/js/app.js
   cp appinfo.json appinfo.json
      
   # Build and install
   pebble build
   pebble install --phone <PHONE_IP>
   ```

2. **Using CloudPebble:**
   - Create a new project
   - Copy the contents of `task_manager.c` to the main C file
   - Add `app.js` as a new JavaScript file
   - Update `appinfo.json` with the provided configuration
   - Add a checkmark icon to resources (or remove the icon code)
   - Build and install to your phone

## Usage

1. **Launch the app** - Shows all task list names
2. **Select a list** - Click SELECT button to view tasks in that list
3. **Select a task** - Click SELECT button to view task details
4. **Mark complete** - In task detail view, click SELECT button to mark the task complete
5. **Navigate back** - Click BACK button at any level

## Navigation Flow

```
Task Lists
    ↓ (SELECT)
Tasks in Selected List
    ↓ (SELECT)
Task Detail
    ↓ (SELECT)
Mark Complete
```

## Customization

### Changing API Base URL

Edit `index.js` and update the `DEFAULT_HOSTNAME` variable:

```javascript
var DEFAULT_HOSTNAME = "your Mac ip address where you are running the python script";
```
Make sure the IP address is not "localhost" or "127.0.0.1". It must be the actual IP address of the Mac that is running the Python server script.

### Adjusting Data Limits

In `task_manager.c`, you can adjust:
- Maximum task lists: `static TaskList task_lists[20];` (currently 20)
- Maximum tasks per list: `static Task tasks[50];` (currently 50)
- String buffer sizes for names, IDs, etc.

### UI Styling

Modify the `menu_draw_row_callback` function to change how items are displayed.

## Troubleshooting

**App not receiving data:**
- Ensure the Python server script is running
- Check that your phone can reach `http://mac_ip_address:5050/tasks`
- Ensure the Pebble app on your phone is running
- Check the JavaScript console logs

**Messages timing out:**
- The app sends messages one at a time to avoid overflow
- Large lists may take a few seconds to fully load

**Task completion not working:**
- Verify the POST endpoint accepts the correct JSON format
- Check that CORS is properly configured if needed

## Notes

- The app uses AppMessage for communication between watch and phone
- Data is not persisted on the watch - it's fetched fresh each time to ensure the data matches up with Reminders
- Maximum message size limitations may affect very long task names/lists
- Network connectivity required for all operations

## License

MIT license. Free to use and modify for your projects!
